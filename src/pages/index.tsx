import Head from 'next/head';
import React, { useState } from 'react';
import axios from "axios";
import SearchBar from '../components/SearchBar';
import FilterPrice from '../components/FilterPrice';
import ProductList from '../components/ProductList';
import { getPage } from '../services/getAPI'

function Home(data: object) {
  return (
    <div>
      <Head>
        <title>wine</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        <SearchBar />
        <FilterPrice />
        <ProductList data={data.data} />
      </main>
      <footer>
        <button onClick={() => getPage(1)}>1</button>
        <button onClick={() => getPage(2)}>2</button>
        <button onClick={() => getPage(3)}>3</button>
        <button onClick={() => getPage(4)}>...</button>
        <button onClick={() => getPage(5)}>pr√≥ximo</button>
      </footer>
    </div >
  )
}

Home.getInitialProps = async () => {

  const URL = `https://wine-back-test.herokuapp.com/products?page=${1}&limit=${10}`
  const response = await axios.get(URL);
  return { data: response.data.items };
}


export default Home;
